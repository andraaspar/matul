!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.matul=n():e.matul=n()}(self,(function(){return function(){"use strict";var e={d:function(n,t){for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},o:function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{FragmentComp:function(){return t},Spread:function(){return r},VComponent:function(){return d},VElement:function(){return i},VPlaceholder:function(){return l},VText:function(){return a},applyHandler:function(){return B},createElement:function(){return R},getIsLogging:function(){return h},m:function(){return b},setIsLogging:function(){return v}});var t=function(e,n){return n.children},r=function(e){this.items=e},i=function(e,n,t,r){this.name=e,this.props=n,this.children=t,this.trusted=r},a=function(e){this.text=e},o=function(){function e(n){this.items=n,this.itemByKey=new Map,this.count=0;for(var t=n.length,r=0;r<n.length;r++){var o=n[r];if(o instanceof d||o instanceof i)null!=o.key&&this.itemByKey.set(o.key,o);else{if(o instanceof a||o instanceof e){this.itemByKey.clear();break}t--}}if(this.itemByKey.size&&this.itemByKey.size<t)throw new Error("[qqf32k] Duplicate / missing keys in list: actual count = "+this.itemByKey.size+" < expected count = "+t)}return e.prototype.updateCount=function(){this.count=0;for(var n=0,t=this.items;n<t.length;n++){var r=t[n];r instanceof e||r instanceof d?this.count+=r.count:(r instanceof i||r instanceof a)&&this.count++}},e}(),l=function(e){this.value=e};function s(e){for(var n=[],t=0,u=e;t<u.length;t++){var f=u[t];if(f instanceof o||f instanceof d||f instanceof i||f instanceof a||f instanceof l)n.push(f);else if(f instanceof r)for(var c=0,v=s(f.items);c<v.length;c++){var h=v[c];n.push(h)}else Array.isArray(f)?n.push(new o(s(f))):["string","number","bigint"].includes(typeof f)?n.push(new a(f+"")):n.push(new l(f))}return n}var d=function(){function e(e,n,t){this.renderInternal=e,this.props=n,this.children=t,this.count=0,this.state={},this.internal={props:n,state:this.state,children:t}}return e.prototype.render=function(){this.renderedVirtual=this.renderInternal(void 0,this.internal),Array.isArray(this.renderedVirtual)||(this.renderedVirtual=this.renderedVirtual?[this.renderedVirtual]:[]),this.renderedVirtual=s(this.renderedVirtual)},e.prototype.updateCount=function(){this.count=0;for(var n=0,t=this.renderedVirtual;n<t.length;n++){var r=t[n];r instanceof o||r instanceof e?this.count+=r.count:(r instanceof i||r instanceof a)&&this.count++}},e}();function u(e){var n=e.handler,t=e.parent,r=e.index,l=e.virtual;if(l instanceof o)for(var s=0;s<l.items.length;s++)r=u({handler:n,parent:t,index:r,virtual:l.items[s]});else if(l instanceof d){if(r=x({handler:n,parent:t,index:r,virtuals:l.renderedVirtual,oldVirtuals:void 0,parentIsBeingRemoved:!1}),l.internal.onadded)try{l.internal.onadded()}catch(e){console.error(e)}if(l.internal.onupdated)try{l.internal.onupdated(!0)}catch(e){console.error(e)}}else if(l instanceof i){if(l.result=n.add({parent:t,index:r,virtual:l}),r++,null==l.trusted&&x({parent:l.result,handler:n,index:0,virtuals:l.children,oldVirtuals:void 0,parentIsBeingRemoved:!1}),l.ref)try{l.ref(l.result)}catch(e){console.error(e)}}else l instanceof a&&(l.result=n.add({parent:t,index:r,virtual:l}),r++);return r}function f(e){var n=e.handler,t=e.parent,r=e.index,l=e.virtual,s=e.parentIsBeingRemoved;if(l instanceof o)for(var u=0;u<l.items.length;u++)f({handler:n,parent:t,index:r,virtual:l.items[u],parentIsBeingRemoved:s});else if(l instanceof d){if(l.internal.onremove)try{l.internal.onremove()}catch(e){console.error(e)}x({handler:n,parent:t,index:r,virtuals:void 0,oldVirtuals:l.renderedVirtual,parentIsBeingRemoved:s}),l.internal.isRemoved=!0}else if(l instanceof i){if(x({handler:n,parent:l.result,index:0,virtuals:void 0,oldVirtuals:l.children,parentIsBeingRemoved:!0}),n.remove({parent:t,index:r,result:l.result,virtual:l,parentIsBeingRemoved:s}),l.ref)try{l.ref(void 0)}catch(e){console.error(e)}}else l instanceof a&&n.remove({parent:t,index:r,result:l.result,virtual:l,parentIsBeingRemoved:s})}var c=!0;function v(e){c=e}function h(){return c}function p(e,n,t){for(var r=0;r<n.length;r++){var i=n[r];if(i===t)return e;i instanceof o||i instanceof d?e+=i.count:e++}throw new Error("[qyswku] Deep index not found.")}function m(e){var n=e.handler,t=e.parent,r=e.index,l=e.oldIndex,s=e.virtual;if(s instanceof o)for(var u=0;u<s.items.length;u++)r=(f=m({handler:n,parent:t,index:r,oldIndex:l,virtual:s.items[u]})).index,l=f.oldIndex;else if(s instanceof d)for(u=0;u<s.renderedVirtual.length;u++){var f;r=(f=m({handler:n,parent:t,index:r,oldIndex:l,virtual:s.renderedVirtual[u]})).index,l=f.oldIndex}else(s instanceof i||s instanceof a)&&(r!==l&&n.move({parent:t,oldIndex:l,index:r,result:s.result,virtual:s}),r<=l&&l++,r++);return{index:r,oldIndex:l}}function y(e){var n=e.handler,t=e.parent,r=e.index,l=e.virtual,s=e.oldVirtual,c=r;if(l instanceof o){var v=s;if(l.itemByKey.size&&v.itemByKey.size){for(var g=[],V=0;V<v.items.length;V++)if((B=v.items[V])instanceof d||B instanceof i){var I=l.itemByKey.get(B.key);I?(c=y({handler:n,parent:t,index:c,virtual:I,oldVirtual:B}),g.push(I)):f({handler:n,parent:t,index:c,virtual:v.items[V],parentIsBeingRemoved:!1})}for(V=0;V<l.items.length;V++){var B,b=l.items[V];b instanceof d||b instanceof i?(B=v.itemByKey.get(b.key))||(c=u({handler:n,parent:t,index:c,virtual:b}),g.push(b)):h()&&console.warn("[qysuqc] Invalid list item!",l.items,V,b)}for(var R=!0;R;)for(R=!1,V=0;V<g.length-1;V++){var w=g[V],k=g[V+1];if(l.items.indexOf(w)-l.items.indexOf(k)>0){var K=p(r,g,w);m({handler:n,parent:t,index:K,oldIndex:K+(w instanceof d?w.count:1),virtual:k}),g[V]=k,g[V+1]=w,R=!0}}}else h()&&l.items.length&&v.items.length&&console.warn("[qyt810] List without a key!",l),c=x({handler:n,parent:t,index:c,virtuals:l.items,oldVirtuals:v.items,parentIsBeingRemoved:!1})}else if(l instanceof d){if(c=x({handler:n,parent:t,index:c,virtuals:l.renderedVirtual,oldVirtuals:s.renderedVirtual,parentIsBeingRemoved:!1}),l.internal.onupdated)try{l.internal.onupdated(!1)}catch(e){console.error(e)}}else l instanceof i?(l.debug=s.debug,null!=l.debug&&--l.debug,l.result=s.result,n.update({result:l.result,virtual:l,oldVirtual:s}),c++,x({handler:n,parent:l.result,index:0,virtuals:l.children,oldVirtuals:s.children,parentIsBeingRemoved:!1})):l instanceof a&&(l.result=s.result,n.update({result:l.result,virtual:l,oldVirtual:s}),c++);return c}function g(e,n){return e instanceof o&&n instanceof o||e instanceof d&&n instanceof d&&e.renderInternal===n.renderInternal||e instanceof i&&n instanceof i&&e.name===n.name&&e.trusted===n.trusted||e instanceof a&&n instanceof a}function x(e){var n=e.handler,t=e.parent,r=e.index,i=e.virtuals,a=e.oldVirtuals,o=e.parentIsBeingRemoved;if(i)if(a){for(var l=i.length;l<a.length;l++)f({handler:n,parent:t,index:r,virtual:a[l],parentIsBeingRemoved:o});for(l=0;l<i.length;l++){var s=i[l],d=a[l];g(s,d)?r=y({handler:n,parent:t,index:r,virtual:s,oldVirtual:d}):(d&&f({handler:n,parent:t,index:r,virtual:d,parentIsBeingRemoved:!1}),r=u({handler:n,parent:t,index:r,virtual:s}))}}else for(l=0;l<i.length;l++)r=u({handler:n,parent:t,index:r,virtual:i[l]});else if(a)for(l=0;l<a.length;l++)f({handler:n,parent:t,index:r,virtual:a[l],parentIsBeingRemoved:o});return r}function V(e,n){var t,r,a,l;if(e instanceof o){var s=n;if(s&&e.itemByKey.size&&s.itemByKey.size)for(var u=0;u<e.items.length;u++){var f=e.items[u];if(f instanceof d||f instanceof i){var c=s.itemByKey.get(f.key);c&&g(f,c)?V(f,c):V(f,void 0)}}else I(e.items,null===(t=n)||void 0===t?void 0:t.items);e.updateCount()}else if(e instanceof d){n instanceof d&&(e.debug=n.debug,null!=e.debug&&--e.debug,e.internal=n.internal,e.internal.props=e.props,e.state=e.internal.state,e.internal.children=e.children),e.render();try{I(e.renderedVirtual,null===(r=n)||void 0===r?void 0:r.renderedVirtual)}catch(t){if(!e.internal.onerror)throw t;try{e.internal.onerror(t),e.render(),I(e.renderedVirtual,null===(a=n)||void 0===a?void 0:a.renderedVirtual)}catch(e){throw console.error(e),t}}e.updateCount()}else e instanceof i&&I(e.children,null===(l=n)||void 0===l?void 0:l.children)}function I(e,n){if(e)if(n)for(var t=0;t<e.length;t++){var r=e[t],i=n[t];g(r,i)?V(r,i):V(r,void 0)}else for(t=0;t<e.length;t++)V(e[t],void 0)}function B(e,n){var t=n?s(n):void 0,r=e.getVirtuals();t&&I(t,r),x({handler:e,parent:e.getRoot(),index:0,virtuals:t,oldVirtuals:r,parentIsBeingRemoved:!1}),e.setVirtuals(t)}function b(e,n,t){var r=Array.isArray(n)?{}:n||{},a=Array.isArray(n)?n:t||[],o=a?s(Array.isArray(a)?a:[a]):[];if("function"==typeof e){var l=r.key,u=r.debug;return delete r.key,delete r.debug,(f=new d(e,r,o)).key=l,f.debug=u,f}l=r.key;var f,c=r.ref,v=(u=r.debug,r.__UNSAFE_trust__);return delete r.key,delete r.ref,delete r.debug,delete r.__UNSAFE_trust__,(f=new i(e,r,o,v)).key=l,f.ref=c,f.debug=u,f}function R(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return b(e,n,t)}return n}()}));