!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.matul=t():e.matul=t()}(self,(function(){return function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{FragmentComp:function(){return r},HtmlResultHandler:function(){return n},Spread:function(){return i},VComponent:function(){return d},VElement:function(){return a},VPlaceholder:function(){return s},VText:function(){return o},applyHandler:function(){return w},createElement:function(){return R},getIsLogging:function(){return h},m:function(){return B},mount:function(){return j},render:function(){return O},setIsLogging:function(){return p},unmount:function(){return C}});var n={};e.r(n),e.d(n,{mount:function(){return j},render:function(){return O},unmount:function(){return C}});var r=function(e,t){return t.children},i=function(e){this.items=e},a=function(e,t,n,r){this.name=e,this.props=t,this.children=n,this.trusted=r},o=function(e){this.text=e},l=function(){function e(t){this.items=t,this.itemByKey=new Map,this.count=0;for(var n=t.length,r=0;r<t.length;r++){var i=t[r];if(i instanceof d||i instanceof a)null!=i.key&&this.itemByKey.set(i.key,i);else{if(i instanceof o||i instanceof e){this.itemByKey.clear();break}n--}}if(this.itemByKey.size&&this.itemByKey.size<n)throw new Error("[qqf32k] Duplicate / missing keys in list: actual count = "+this.itemByKey.size+" < expected count = "+n)}return e.prototype.calculateCount=function(){this.count=0;for(var t=0,n=this.items;t<n.length;t++){var r=n[t];r instanceof e||r instanceof d?this.count+=r.count:(r instanceof a||r instanceof o)&&this.count++}},e}(),s=function(e){this.value=e};function u(e){for(var t=[],n=0,r=e;n<r.length;n++){var c=r[n];if(c instanceof l||c instanceof d||c instanceof a||c instanceof o||c instanceof s)t.push(c);else if(c instanceof i)for(var f=0,v=u(c.items);f<v.length;f++){var p=v[f];t.push(p)}else Array.isArray(c)?t.push(new l(u(c))):["string","number","bigint"].includes(typeof c)?t.push(new o(c+"")):t.push(new s(c))}return t}var d=function(){function e(e,t,n){this.renderInternal=e,this.props=t,this.children=n,this.count=0,this.state={},this.internal={props:t,state:this.state,children:n}}return e.prototype.render=function(){this.renderedVirtual=this.renderInternal(void 0,this.internal),Array.isArray(this.renderedVirtual)||(this.renderedVirtual=this.renderedVirtual?[this.renderedVirtual]:[]),this.renderedVirtual=u(this.renderedVirtual),this.count=0;for(var t=0,n=this.renderedVirtual;t<n.length;t++){var r=n[t];r instanceof l||r instanceof e?this.count+=r.count:this.count++}},e}();function c(e){var t=e.handler,n=e.parent,r=e.index,i=e.virtual;if(i instanceof l)for(var s=0;s<i.items.length;s++)r=c({handler:t,parent:n,index:r,virtual:i.items[s]});else if(i instanceof d){if(r=V({handler:t,parent:n,index:r,virtuals:i.renderedVirtual,oldVirtuals:void 0,parentIsBeingRemoved:!1}),i.internal.onadded)try{i.internal.onadded()}catch(e){console.error(e)}if(i.internal.onupdated)try{i.internal.onupdated(!0)}catch(e){console.error(e)}}else if(i instanceof a){if(i.result=t.add({parent:n,index:r,virtual:i}),r++,null==i.trusted&&V({parent:i.result,handler:t,index:0,virtuals:i.children,oldVirtuals:void 0,parentIsBeingRemoved:!1}),i.ref)try{i.ref(i.result)}catch(e){console.error(e)}}else i instanceof o&&(i.result=t.add({parent:n,index:r,virtual:i}),r++);return r}function f(e){var t=e.handler,n=e.parent,r=e.index,i=e.virtual,s=e.parentIsBeingRemoved;if(i instanceof l)for(var u=0;u<i.items.length;u++)f({handler:t,parent:n,index:r,virtual:i.items[u],parentIsBeingRemoved:s});else if(i instanceof d){if(i.internal.onremove)try{i.internal.onremove()}catch(e){console.error(e)}V({handler:t,parent:n,index:r,virtuals:void 0,oldVirtuals:i.renderedVirtual,parentIsBeingRemoved:s}),i.internal.isRemoved=!0}else if(i instanceof a){if(V({handler:t,parent:i.result,index:0,virtuals:void 0,oldVirtuals:i.children,parentIsBeingRemoved:!0}),t.remove({parent:n,index:r,result:i.result,virtual:i,parentIsBeingRemoved:s}),i.ref)try{i.ref(void 0)}catch(e){console.error(e)}}else i instanceof o&&t.remove({parent:n,index:r,result:i.result,virtual:i,parentIsBeingRemoved:s})}var v=!0;function p(e){v=e}function h(){return v}function m(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];if(i===n)return e;i instanceof l||i instanceof d?e+=i.count:e++}throw new Error("[qyswku] Deep index not found.")}function g(e){var t=e.handler,n=e.parent,r=e.index,i=e.oldIndex,s=e.virtual;if(s instanceof l)for(var u=0;u<s.items.length;u++)r=(c=g({handler:t,parent:n,index:r,oldIndex:i+u,virtual:s.items[u]})).index,i=c.oldIndex;else if(s instanceof d)for(u=0;u<s.renderedVirtual.length;u++){var c;r=(c=g({handler:t,parent:n,index:r,oldIndex:i,virtual:s.renderedVirtual[u]})).index,i=c.oldIndex}else(s instanceof a||s instanceof o)&&(r!==i&&t.move({parent:n,oldIndex:i,index:r,result:s.result,virtual:s}),r<=i&&i++,r++);return{index:r,oldIndex:i}}function y(e){var t=e.handler,n=e.parent,r=e.index,i=e.virtual,s=e.oldVirtual,u=r;if(i instanceof l){var v=s;if(i.itemByKey.size&&v.itemByKey.size){for(var p=[],x=0;x<v.items.length;x++)if((I=v.items[x])instanceof d||I instanceof a){var b=i.itemByKey.get(I.key);b?(u=y({handler:t,parent:n,index:u,virtual:b,oldVirtual:I}),p.push(b)):f({handler:t,parent:n,index:u,virtual:v.items[x],parentIsBeingRemoved:!1})}for(x=0;x<i.items.length;x++){var I,w=i.items[x];w instanceof d||w instanceof a?(I=v.itemByKey.get(w.key))||(u=c({handler:t,parent:n,index:u,virtual:w}),p.push(w)):h()&&console.warn("[qysuqc] Invalid list item!",i.items,x,w)}for(var B=!0;B;)for(B=!1,x=0;x<p.length-1;x++){var R=p[x],k=p[x+1];if(i.items.indexOf(R)-i.items.indexOf(k)>0){var A=m(r,p,R);g({handler:t,parent:n,index:A,oldIndex:A+(R instanceof d?R.count:1),virtual:k}),p[x]=k,p[x+1]=R,B=!0}}}else h()&&i.items.length&&v.items.length&&console.warn("[qyt810] List without a key!",i),u=V({handler:t,parent:n,index:u,virtuals:i.items,oldVirtuals:v.items,parentIsBeingRemoved:!1})}else if(i instanceof d){if(u=V({handler:t,parent:n,index:u,virtuals:i.renderedVirtual,oldVirtuals:s.renderedVirtual,parentIsBeingRemoved:!1}),i.internal.onupdated)try{i.internal.onupdated(!1)}catch(e){console.error(e)}}else i instanceof a?(i.debug=s.debug,null!=i.debug&&--i.debug,i.result=s.result,t.update({result:i.result,virtual:i,oldVirtual:s}),u++,V({handler:t,parent:i.result,index:0,virtuals:i.children,oldVirtuals:s.children,parentIsBeingRemoved:!1})):i instanceof o&&(i.result=s.result,t.update({result:i.result,virtual:i,oldVirtual:s}),u++);return u}function x(e,t){return e instanceof l&&t instanceof l||e instanceof d&&t instanceof d&&e.renderInternal===t.renderInternal||e instanceof a&&t instanceof a&&e.name===t.name&&e.trusted===t.trusted||e instanceof o&&t instanceof o}function V(e){var t=e.handler,n=e.parent,r=e.index,i=e.virtuals,a=e.oldVirtuals,o=e.parentIsBeingRemoved;if(i)if(a){for(var l=i.length;l<a.length;l++)f({handler:t,parent:n,index:r,virtual:a[l],parentIsBeingRemoved:o});for(l=0;l<i.length;l++){var s=i[l],u=a[l];x(s,u)?r=y({handler:t,parent:n,index:r,virtual:s,oldVirtual:u}):(u&&f({handler:t,parent:n,index:r,virtual:u,parentIsBeingRemoved:!1}),r=c({handler:t,parent:n,index:r,virtual:s}))}}else for(l=0;l<i.length;l++)r=c({handler:t,parent:n,index:r,virtual:i[l]});else if(a)for(l=0;l<a.length;l++)f({handler:t,parent:n,index:r,virtual:a[l],parentIsBeingRemoved:o});return r}function b(e,t){var n,r,i,o;if(e instanceof l){var s=t;if(s&&e.itemByKey.size&&s.itemByKey.size)for(var u=0;u<e.items.length;u++){var c=e.items[u];if(c instanceof d||c instanceof a){var f=s.itemByKey.get(c.key);f&&x(c,f)?b(c,f):b(c,void 0)}}else I(e.items,null===(n=t)||void 0===n?void 0:n.items);e.calculateCount()}else if(e instanceof d){t instanceof d&&(e.debug=t.debug,null!=e.debug&&--e.debug,e.internal=t.internal,e.internal.props=e.props,e.state=e.internal.state,e.internal.children=e.children),e.render();try{I(e.renderedVirtual,null===(r=t)||void 0===r?void 0:r.renderedVirtual)}catch(n){if(!e.internal.onerror)throw n;try{e.internal.onerror(n),e.render(),I(e.renderedVirtual,null===(i=t)||void 0===i?void 0:i.renderedVirtual)}catch(e){throw console.error(e),n}}}else e instanceof a&&I(e.children,null===(o=t)||void 0===o?void 0:o.children)}function I(e,t){if(e)if(t)for(var n=0;n<e.length;n++){var r=e[n],i=t[n];x(r,i)?b(r,i):b(r,void 0)}else for(n=0;n<e.length;n++)b(e[n],void 0)}function w(e,t){var n=t?u(t):void 0,r=e.getVirtuals();n&&I(n,r),V({handler:e,parent:e.getRoot(),index:0,virtuals:n,oldVirtuals:r,parentIsBeingRemoved:!1}),e.setVirtuals(n)}function B(e,t,n){var r=Array.isArray(t)?{}:t||{},i=Array.isArray(t)?t:n||[],o=i?u(Array.isArray(i)?i:[i]):[];if("function"==typeof e){var l=r.key,s=r.debug;return delete r.key,delete r.debug,(c=new d(e,r,o)).key=l,c.debug=s,c}l=r.key;var c,f=r.ref,v=(s=r.debug,r.__UNSAFE_trust__);return delete r.key,delete r.ref,delete r.debug,delete r.__UNSAFE_trust__,(c=new a(e,r,o,v)).key=l,c.ref=f,c.debug=s,c}function R(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return B(e,t,n)}var k=/^data-/i,A=/^attr--/i,E=/^on/,q=function(){function e(e){this.root=e}return e.prototype.getRoot=function(){return this.root},e.prototype.getVirtuals=function(){return this.v},e.prototype.setVirtuals=function(e){this.v=e},e.prototype.add=function(e){var t,n,r=null!==(t=e.parent.ownerDocument)&&void 0!==t?t:e.parent;return e.virtual instanceof a?(z(n="svg"===e.virtual.name||e.parent instanceof SVGElement?r.createElementNS("http://www.w3.org/2000/svg",e.virtual.name):r.createElement(e.virtual.name),e.virtual,void 0),null!=e.virtual.trusted&&(n.innerHTML=e.virtual.trusted)):n=r.createTextNode(e.virtual.text),e.index>=e.parent.childNodes.length?e.parent.appendChild(n):e.parent.insertBefore(n,e.parent.childNodes[e.index]),n},e.prototype.move=function(e){e.index>=e.parent.childNodes.length?e.parent.appendChild(e.result):e.parent.insertBefore(e.result,e.parent.childNodes[e.index])},e.prototype.update=function(e){if(e.virtual instanceof a){for(var t=0,n=Object.keys(e.oldVirtual.props);t<n.length;t++){var r=n[t];r in e.virtual.props||("class"===r?e.result.className="":"style"===r?e.result.removeAttribute("style"):k.test(r)?delete e.result.dataset[K(r)]:e.result[r]="")}z(e.result,e.virtual,e.oldVirtual),e.oldVirtual.trusted!==e.virtual.trusted&&(e.result.innerHTML=e.virtual.trusted)}else e.virtual.text!==e.oldVirtual.text&&(e.result.textContent=e.virtual.text);return e.result},e.prototype.remove=function(e){if(e.virtual instanceof a)for(var t=0,n=Object.keys(e.virtual.props);t<n.length;t++){var r=n[t];E.test(r)&&(e.result[r]=null)}e.parentIsBeingRemoved||e.parent.removeChild(e.result)},e}();function z(e,t,n){for(var r=0,i=Object.entries(t.props);r<i.length;r++){var a=i[r],o=a[0],l=a[1];if(!n||l!==n.props[o])if(e instanceof HTMLElement)switch(o){case"class":e.className=null!=l?l:"";break;case"for":e.htmlFor=null!=l?l:"";break;case"tabindex":e.tabIndex=null!=l?l:"";break;case"style":e.setAttribute(o,null!=l?l:"");break;default:k.test(o)?e.dataset[K(o)]=null!=l?l:"":A.test(o)?e.setAttribute(o.replace(A,""),null!=l?l:""):e[o]=null!=l?l:""}else e instanceof SVGElement?E.test(o)?e[o]=null!=l?l:"":e.setAttribute(o,null!=l?l:""):A.test(o)?e.setAttribute(o.replace(A,""),null!=l?l:""):e[o]=null!=l?l:""}}function K(e){return e.slice(5).replace(/-([a-z])/gi,(function(e,t){return t.toUpperCase()}))}var _=[];function j(e,t){if(_.findIndex((function(t){return t[0].getRoot()===e}))>=0)throw new Error("[qzj84x] Root already mounted.");_.push([new q(e),t]),e.innerHTML=""}function C(e){var t=_.findIndex((function(t){return t[0].getRoot()===e}));if(t<0)throw new Error("[qqf154] Unknown root.");_.splice(t,1)}var S=!1,N=void 0;function O(){return N?(h()&&(console.groupCollapsed("[qz65l6] ::: Render merged."),console.trace(),console.groupEnd()),N):N=new Promise((function(e,t){requestAnimationFrame((function(){if(N=void 0,S)t(new Error("[qz65l9] Render in render not supported!"));else{S=!0,h()&&(console.groupCollapsed("[qz65lc] ►►► Render."),console.trace(),console.groupEnd());for(var n=Date.now(),r=0,i=_;r<i.length;r++){var a=i[r];w(a[0],[B(a[1],{})])}h()&&console.log("[qz65lf] ••• Rendered in "+(Date.now()-n)+" ms."),S=!1,e()}}))}))}return t}()}));