var matul;(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{FragmentComp:()=>r,HtmlResultHandler:()=>n,Spread:()=>i,VComponent:()=>u,VElement:()=>s,VPlaceholder:()=>a,VText:()=>o,applyHandler:()=>w,createElement:()=>R,getIsLogging:()=>v,m:()=>B,mount:()=>L,render:()=>O,setIsLogging:()=>h,unmount:()=>_});var n={};e.r(n),e.d(n,{mount:()=>L,render:()=>O,unmount:()=>_});const r=(e,t)=>t.children;class i{constructor(e){this.items=e}}class s{constructor(e,t,n,r){this.name=e,this.props=t,this.children=n,this.trusted=r}}class o{constructor(e){this.text=e}}class l{constructor(e){this.items=e,this.itemByKey=new Map,this.count=0;let t=e.length;for(let n=0;n<e.length;n++){const r=e[n];if(r instanceof u||r instanceof s)null!=r.key&&this.itemByKey.set(r.key,r);else{if(r instanceof o||r instanceof l){this.itemByKey.clear();break}t--}}if(this.itemByKey.size&&this.itemByKey.size<t)throw new Error(`[qqf32k] Duplicate / missing keys in list: actual count = ${this.itemByKey.size} < expected count = ${t}`)}updateCount(){this.count=0;for(const e of this.items)e instanceof l||e instanceof u?this.count+=e.count:(e instanceof s||e instanceof o)&&this.count++}}class a{constructor(e){this.value=e}}function d(e){const t=[];for(const n of e)if(n instanceof l||n instanceof u||n instanceof s||n instanceof o||n instanceof a)t.push(n);else if(n instanceof i)for(const e of d(n.items))t.push(e);else Array.isArray(n)?t.push(new l(d(n))):["string","number","bigint"].includes(typeof n)?t.push(new o(n+"")):t.push(new a(n));return t}class u{constructor(e,t,n){this.renderInternal=e,this.props=t,this.children=n,this.count=0,this.state={},this.internal={props:t,state:this.state,children:n}}render(){this.renderedVirtual=this.renderInternal(void 0,this.internal),Array.isArray(this.renderedVirtual)||(this.renderedVirtual=this.renderedVirtual?[this.renderedVirtual]:[]),this.renderedVirtual=d(this.renderedVirtual)}updateCount(){this.count=0;for(const e of this.renderedVirtual)e instanceof l||e instanceof u?this.count+=e.count:(e instanceof s||e instanceof o)&&this.count++}}function c({handler:e,parent:t,index:n,virtual:r}){if(r instanceof l)for(let i=0;i<r.items.length;i++)n=c({handler:e,parent:t,index:n,virtual:r.items[i]});else if(r instanceof u){if(n=V({handler:e,parent:t,index:n,virtuals:r.renderedVirtual,oldVirtuals:void 0,parentIsBeingRemoved:!1}),r.internal.onadded)try{r.internal.onadded()}catch(e){console.error(e)}if(r.internal.onupdated)try{r.internal.onupdated(!0)}catch(e){console.error(e)}}else if(r instanceof s){if(r.result=e.add({parent:t,index:n,virtual:r}),n++,null==r.trusted&&V({parent:r.result,handler:e,index:0,virtuals:r.children,oldVirtuals:void 0,parentIsBeingRemoved:!1}),r.ref)try{r.ref(r.result)}catch(e){console.error(e)}}else r instanceof o&&(r.result=e.add({parent:t,index:n,virtual:r}),n++);return n}function f({handler:e,parent:t,index:n,virtual:r,parentIsBeingRemoved:i}){if(r instanceof l)for(let s=0;s<r.items.length;s++)f({handler:e,parent:t,index:n,virtual:r.items[s],parentIsBeingRemoved:i});else if(r instanceof u){if(r.internal.onremove)try{r.internal.onremove()}catch(e){console.error(e)}V({handler:e,parent:t,index:n,virtuals:void 0,oldVirtuals:r.renderedVirtual,parentIsBeingRemoved:i}),r.internal.isRemoved=!0}else if(r instanceof s){if(V({handler:e,parent:r.result,index:0,virtuals:void 0,oldVirtuals:r.children,parentIsBeingRemoved:!0}),e.remove({parent:t,index:n,result:r.result,virtual:r,parentIsBeingRemoved:i}),r.ref)try{r.ref(void 0)}catch(e){console.error(e)}}else r instanceof o&&e.remove({parent:t,index:n,result:r.result,virtual:r,parentIsBeingRemoved:i})}let p=!0;function h(e){p=e}function v(){return p}function m(e,t,n){for(let r=0;r<t.length;r++){const i=t[r];if(i===n)return e;i instanceof l||i instanceof u?e+=i.count:e++}throw new Error("[qyswku] Deep index not found.")}function g({handler:e,parent:t,index:n,oldIndex:r,virtual:i}){if(i instanceof l)for(let s=0;s<i.items.length;s++){const o=g({handler:e,parent:t,index:n,oldIndex:r,virtual:i.items[s]});n=o.index,r=o.oldIndex}else if(i instanceof u)for(let s=0;s<i.renderedVirtual.length;s++){const o=g({handler:e,parent:t,index:n,oldIndex:r,virtual:i.renderedVirtual[s]});n=o.index,r=o.oldIndex}else(i instanceof s||i instanceof o)&&(n!==r&&e.move({parent:t,oldIndex:r,index:n,result:i.result,virtual:i}),n<=r&&r++,n++);return{index:n,oldIndex:r}}function y({handler:e,parent:t,index:n,virtual:r,oldVirtual:i}){let a=n;if(r instanceof l){const o=i;if(r.itemByKey.size&&o.itemByKey.size){const i=[];for(let n=0;n<o.items.length;n++){const l=o.items[n];if(l instanceof u||l instanceof s){const s=r.itemByKey.get(l.key);s?(a=y({handler:e,parent:t,index:a,virtual:s,oldVirtual:l}),i.push(s)):f({handler:e,parent:t,index:a,virtual:o.items[n],parentIsBeingRemoved:!1})}}for(let n=0;n<r.items.length;n++){const l=r.items[n];l instanceof u||l instanceof s?o.itemByKey.get(l.key)||(a=c({handler:e,parent:t,index:a,virtual:l}),i.push(l)):v()&&console.warn("[qysuqc] Invalid list item!",r.items,n,l)}let l=!0;for(;l;){l=!1;for(let s=0;s<i.length-1;s++){const o=i[s],a=i[s+1];if(r.items.indexOf(o)-r.items.indexOf(a)>0){const r=m(n,i,o);g({handler:e,parent:t,index:r,oldIndex:r+(o instanceof u?o.count:1),virtual:a}),i[s]=a,i[s+1]=o,l=!0}}}}else v()&&r.items.length&&o.items.length&&console.warn("[qyt810] List without a key!",r),a=V({handler:e,parent:t,index:a,virtuals:r.items,oldVirtuals:o.items,parentIsBeingRemoved:!1})}else if(r instanceof u){if(a=V({handler:e,parent:t,index:a,virtuals:r.renderedVirtual,oldVirtuals:i.renderedVirtual,parentIsBeingRemoved:!1}),r.internal.onupdated)try{r.internal.onupdated(!1)}catch(e){console.error(e)}}else r instanceof s?(r.debug=i.debug,null!=r.debug&&--r.debug,r.result=i.result,e.update({result:r.result,virtual:r,oldVirtual:i}),a++,V({handler:e,parent:r.result,index:0,virtuals:r.children,oldVirtuals:i.children,parentIsBeingRemoved:!1})):r instanceof o&&(r.result=i.result,e.update({result:r.result,virtual:r,oldVirtual:i}),a++);return a}function x(e,t){return e instanceof l&&t instanceof l||e instanceof u&&t instanceof u&&e.renderInternal===t.renderInternal||e instanceof s&&t instanceof s&&e.name===t.name&&e.trusted===t.trusted||e instanceof o&&t instanceof o}function V({handler:e,parent:t,index:n,virtuals:r,oldVirtuals:i,parentIsBeingRemoved:s}){if(r)if(i){for(let o=r.length;o<i.length;o++)f({handler:e,parent:t,index:n,virtual:i[o],parentIsBeingRemoved:s});for(let s=0;s<r.length;s++){const o=r[s],l=i[s];x(o,l)?n=y({handler:e,parent:t,index:n,virtual:o,oldVirtual:l}):(l&&f({handler:e,parent:t,index:n,virtual:l,parentIsBeingRemoved:!1}),n=c({handler:e,parent:t,index:n,virtual:o}))}}else for(let i=0;i<r.length;i++)n=c({handler:e,parent:t,index:n,virtual:r[i]});else if(i)for(let r=0;r<i.length;r++)f({handler:e,parent:t,index:n,virtual:i[r],parentIsBeingRemoved:s});return n}function b(e,t){if(e instanceof l){const n=t;if(n&&e.itemByKey.size&&n.itemByKey.size)for(let t=0;t<e.items.length;t++){const r=e.items[t];if(r instanceof u||r instanceof s){const e=n.itemByKey.get(r.key);e&&x(r,e)?b(r,e):b(r,void 0)}}else I(e.items,t?.items);e.updateCount()}else if(e instanceof u){t instanceof u&&(e.debug=t.debug,null!=e.debug&&--e.debug,e.internal=t.internal,e.internal.props=e.props,e.state=e.internal.state,e.internal.children=e.children),e.render();try{I(e.renderedVirtual,t?.renderedVirtual)}catch(n){if(!e.internal.onerror)throw n;try{e.internal.onerror(n),e.render(),I(e.renderedVirtual,t?.renderedVirtual)}catch(e){throw console.error(e),n}}e.updateCount()}else e instanceof s&&I(e.children,t?.children)}function I(e,t){if(e)if(t)for(let n=0;n<e.length;n++){const r=e[n],i=t[n];x(r,i)?b(r,i):b(r,void 0)}else for(let t=0;t<e.length;t++)b(e[t],void 0)}function w(e,t){const n=t?d(t):void 0,r=e.getVirtuals();n&&I(n,r),V({handler:e,parent:e.getRoot(),index:0,virtuals:n,oldVirtuals:r,parentIsBeingRemoved:!1}),e.setVirtuals(n)}function B(e,t,n){const r=Array.isArray(t)?{}:t||{},i=Array.isArray(t)?t:n||[],o=i?d(Array.isArray(i)?i:[i]):[];if("function"==typeof e){const t=r.key,n=r.debug;delete r.key,delete r.debug;const i=new u(e,r,o);return i.key=t,i.debug=n,i}{const t=r.key,n=r.ref,i=r.debug,l=r.__UNSAFE_trust__;delete r.key,delete r.ref,delete r.debug,delete r.__UNSAFE_trust__;const a=new s(e,r,o,l);return a.key=t,a.ref=n,a.debug=i,a}}function R(e,t,...n){return B(e,t,n)}const k=/^data-/i,E=/^attr--/i,A=/^on/;class q{constructor(e){this.root=e}getRoot(){return this.root}getVirtuals(){return this.v}setVirtuals(e){this.v=e}add(e){let t;const n=e.parent.ownerDocument??e.parent;return e.virtual instanceof s?(t="svg"===e.virtual.name||e.parent instanceof SVGElement?n.createElementNS("http://www.w3.org/2000/svg",e.virtual.name):n.createElement(e.virtual.name),z(t,e.virtual,void 0),null!=e.virtual.trusted&&(t.innerHTML=e.virtual.trusted)):t=n.createTextNode(e.virtual.text),e.index>=e.parent.childNodes.length?e.parent.appendChild(t):e.parent.insertBefore(t,e.parent.childNodes[e.index]),t}move(e){e.index>=e.parent.childNodes.length?e.parent.appendChild(e.result):e.parent.insertBefore(e.result,e.parent.childNodes[e.index])}update(e){if(e.virtual instanceof s){for(let t of Object.keys(e.oldVirtual.props))t in e.virtual.props||("class"===t?e.result.className="":"style"===t?e.result.removeAttribute("style"):k.test(t)?delete e.result.dataset[C(t)]:e.result[t]="");z(e.result,e.virtual,e.oldVirtual),e.oldVirtual.trusted!==e.virtual.trusted&&(e.result.innerHTML=e.virtual.trusted)}else e.virtual.text!==e.oldVirtual.text&&(e.result.textContent=e.virtual.text);return e.result}remove(e){if(e.virtual instanceof s)for(const t of Object.keys(e.virtual.props))A.test(t)&&e.result.removeEventListener(t.slice(2),e.virtual.props[t]);e.parentIsBeingRemoved||e.parent.removeChild(e.result)}}function z(e,t,n){for(let[r,i]of Object.entries(t.props))if(!n||i!==n.props[r])if(e instanceof HTMLElement)switch(r){case"class":e.className=i??"";break;case"for":e.htmlFor=i??"";break;case"tabindex":e.tabIndex=i??"";break;case"style":e.setAttribute(r,i??"");break;default:if(k.test(r))e.dataset[C(r)]=i??"";else if(E.test(r))e.setAttribute(r.replace(E,""),i??"");else if(A.test(r)){const t=n?.props[r];t&&e.removeEventListener(r.slice(2),t),i&&e.addEventListener(r.slice(2),i)}else e[r]=i??""}else if(e instanceof SVGElement)if(A.test(r)){const t=n?.props[r];t&&e.removeEventListener(r.slice(2),t),i&&e.addEventListener(r.slice(2),i)}else e.setAttribute(r,i??"");else E.test(r)?e.setAttribute(r.replace(E,""),i??""):e[r]=i??""}function C(e){return e.slice(5).replace(/-([a-z])/gi,((e,t)=>t.toUpperCase()))}const K=[];function L(e,t){if(K.findIndex((t=>t[0].getRoot()===e))>=0)throw new Error("[qzj84x] Root already mounted.");K.push([new q(e),t]),e.innerHTML=""}function _(e){const t=K.findIndex((t=>t[0].getRoot()===e));if(t<0)throw new Error("[qqf154] Unknown root.");K.splice(t,1)}let S,N=!1;function O(){return S?(v()&&(console.groupCollapsed("[qz65l6] ::: Render merged."),console.trace(),console.groupEnd()),S):S=new Promise(((e,t)=>{requestAnimationFrame((()=>{if(S=void 0,N)return void t(new Error("[qz65l9] Render in render not supported!"));N=!0,v()&&(console.groupCollapsed("[qz65lc] ►►► Render."),console.trace(),console.groupEnd());const n=Date.now();for(const[e,t]of K)w(e,[B(t,{})]);v()&&console.log(`[qz65lf] ••• Rendered in ${Date.now()-n} ms.`),N=!1,e()}))}))}matul=t})();